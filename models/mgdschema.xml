<?xml version="1.0" encoding="UTF-8"?>
<Schema xmlns="http://www.midgard-project.org/repligard/1.4">
    <type name="com_meego_package" table="com_meego_package" parent="com_meego_repository">
        <property name="id" type="unsigned integer" primaryfield="id" index="yes" />
        <property name="name" type="string" index="yes" />
        <property name="title" type="string" index="yes" />
        <property name="repository" type="unsigned integer" link="com_meego_repository:id" parentfield="repository" />
        <property name="version" type="string" index="yes" />
        <property name="summary" type="text" />
        <property name="description" type="text" />
        <property name="category" type="unsigned integer" link="com_meego_package_category:id">
            <description>Package category, e.g. applications/internet</description>
        </property>
        <property name="license" type="string">
            <description>Package license, e.g. GPLv2+</description>
        </property>
        <property name="homepageurl" type="string">
            <description>Usually points to an upstream project's web site.</description>
        </property>
        <property name="downloadurl" type="string">
            <description>Direct download link to the package (resides in an OBS repository).</description>
        </property>
        <property name="installfileurl" type="string">
            <description>Link to an installation file that lists needed repositories to fulfill runtime dependencies.</description>
        </property>
        <property name="bugtracker" type="string" />
    </type>

    <type name="com_meego_package_category" table="com_meego_package_category">
        <property name="id" type="unsigned integer" primaryfield="id" index="yes" />
        <property name="up" type="unsigned integer" link="com_meego_package_category:id" upfield="up" />
        <property name="name" type="string" index="yes" />
    </type>

    <type name="com_meego_package_relation" table="com_meego_package_relation" parent="com_meego_package">
        <property name="id" type="unsigned integer" primaryfield="id" index="yes" />
        <property name="from" type="unsigned integer" link="com_meego_package:id" parentfield="frompackage" />
        <property name="relation" type="string" index="yes">
            <!-- TODO: enum -->
            <description>Relation between packages, for example requires, buildrequires, obsoletes, suggests, conflicts</description>
        </property>
        <property name="group" type="string" field="grouppackage" >
            <description>In case of OR dependencies, the name of the dependency group the relation belongs to</description>
        </property>
        <property name="to" type="unsigned integer" link="com_meego_package:id" field="topackage">
            <description>Relation to package if it is in database</description>
        </property>
        <property name="toname" type="string">
            <description>Relation to package name, regardless if package is in database</description>
        </property>
        <property name="version" type="string" index="yes" />
        <property name="constraint" type="string" dbtype="string(2)" index="yes" />
    </type>

    <type name="com_meego_repository" table="com_meego_repository">
        <property name="id" type="unsigned integer" primaryfield="id" index="yes">
            <description>Local non-replication-safe database identifier</description>
        </property>
        <property name="name" type="string" index="yes">
            <description>Name for the repository, to be used in urls</description>
        </property>
        <property name="title" type="string">
            <description>Pretty name for the repository</description>
        </property>
        <property name="arch" type="string">
            <description>Arch, example: armv7el</description>
        </property>
        <property name="url" type="string">
            <description>Repository URL</description>
        </property>
        <property name="os" type="string">
            <description>Name of the OS this repository is made for, example: meego</description>
        </property>
        <property name="osversion" type="string">
            <description>Version of the OS this repository is made for, example: 1.0</description>
        </property>
        <property name="osgroup" type="string">
            <description>Name of the group this repository belongs to within the OS, example: core</description>
        </property>
        <property name="osux" type="string">
            <description>Name of the user experience this repository belongs to within the group, example: netbook</description>
        </property>
        <property name="disabledownload" type="bool">
            <description>Disable direct downloads for this repository</description>
        </property>
    </type>

    <type name="com_meego_repository_debian" extends="com_meego_repository">
        <property name="suite" type="string">
            <description>Suite, eg diablo</description>
        </property>
        <property name="dist" type="string">
            <description>Dist, eg extras-devel</description>
        </property>
        <property name="component" type="string">
            <description>Component, eg free</description>
        </property>
    </type>
</Schema>